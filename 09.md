# ç¬¬ 09 ç¯‡ï¼šå°è¯•ä½¿ç”¨ CLI æ¥å¼€å‘é¡¹ç›®     

åœ¨å‰é¢ç¯‡ç« æˆ‘ä»¬ä½¿ç”¨æ§åˆ¶å°ç¼–å†™ä»£ç ã€ç®¡ç†æˆ‘ä»¬çš„å†…å®¹ã€‚ä»è¿™ä¸€èŠ‚å¼€å§‹ä½¿ç”¨[ã€Œå‘½ä»¤è¡Œå·¥å…· CLIã€](https://cloudbase.net/tools.html) æ¥è¿›è¡Œå¼€å‘ã€‚      
é¦–å…ˆæˆ‘ä»¬éœ€è¦å®‰è£… CLI å·¥å…·ã€‚        

å®‰è£…äº‘å¼€å‘ CLI ä¹‹å‰éœ€è¦å®‰è£… Node.jsã€‚å¦‚æœæœ¬æœºæ²¡æœ‰å®‰è£… Node.jsï¼Œè¯·ä» [Node.js](https://nodejs.org/zh-cn/) å®˜ç½‘ä¸‹è½½äºŒè¿›åˆ¶æ–‡ä»¶ç›´æ¥å®‰è£…ï¼Œå»ºè®®é€‰æ‹© LTS ç‰ˆæœ¬ï¼Œç‰ˆæœ¬å¿…é¡»ä¸º 8.6.0+ã€‚        

## å®‰è£…      
å¯ä»¥ä½¿ç”¨ npm æ¥å®‰è£…ï¼Œåœ¨å‘½ä»¤è¡Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š     
```bash
npm i -g @cloudbase/cli           
```     
å¦‚æœé‡åˆ°æç¤ºæƒé™ä¸è¶³çš„æƒ…å†µï¼Œè¯·åŠ  sudo å‘½ä»¤ï¼Œå¦‚ä¸‹ï¼š    
```bash
sudo npm i -g @cloudbase/cli           
```         
å¦‚æœæç¤ºè¾“å…¥å¯†ç ï¼Œè¯·è¾“å…¥æœ¬æœºçš„å½“å‰ç”¨æˆ·çš„å¼€æœºå¯†ç ã€‚        

æµ‹è¯•æ˜¯å¦å®‰è£…æˆåŠŸï¼Œå¯ä»¥ä½¿ç”¨ -v å‘½ä»¤ï¼Œå¦‚ä¸‹ï¼š   
```bash
cloudbase -v        
```               
å¦‚æœæ­£ç¡®è¿”å›ç‰ˆæœ¬å·ï¼Œä»£è¡¨å®‰è£…æˆåŠŸã€‚     

è¿™æ—¶å€™ä½ å‘ç° cloudbase è¿™ä¹ˆä»é•¿ï¼Œè¶³è¶³ 9 ä¸ªå­—æ¯ï¼Œéš¾æ‹¼å†™éš¾è®°å¿†ï¼›å…¶å®å¯ä»¥ä½¿ç”¨ tcb ä»£æ›¿ cloudbaseï¼Œæ¯”å¦‚ï¼š   
```bash
tcb -v        
```  

## CLIã€æ§åˆ¶å°ä»€ä¹ˆå…³ç³»     
å¯ä»¥è¿™ä¹ˆç†è§£ï¼Œæ§åˆ¶å°æ˜¯ä¸€ä¸ªå¹³å°ï¼Œå¯ä»¥åœ¨ä¸Šé¢ä½¿ç”¨ Web IDE(cloud studio) ç¼–å†™ä»£ç ï¼Œä¹Ÿå¯ä»¥ç®¡ç†å„ç§é…ç½®ï¼Œä¾‹å¦‚å®‰å…¨åŸŸåã€ç‹¬ç«‹åŸŸåè®¾ç½®ã€æ–‡ä»¶ç®¡ç†ç­‰ç­‰ã€‚ä½†æ˜¯æœ‰ä¸€äº›æ“ä½œå…¶å®å¯ä»¥æ”¾åˆ°å‘½ä»¤è¡Œçš„ï¼Œæ¯”å¦‚é™æ€ç½‘ç«™éƒ¨ç½²æ˜¯ä¸æ˜¯å¯ä»¥ä¸€è¡Œå‘½ä»¤ï¼Œå°±å¯ä»¥å°†æ–‡ä»¶ä¸Šä¼ ä¸Šå»ã€‚å› æ­¤ï¼š     

![](https://6f70-open-cloud-5d89b0-1300954686.tcb.qcloud.la/serverless-reading/34.png)       

- CLI æä¾›ä¸€äº›ç®€å•çš„å‘½ä»¤ç”¨äºå¼€å‘å·¥å…·è°ƒåº¦ï¼Œä¾‹å¦‚åœ¨ Vuepress package.json ä¸­é›†æˆ hosting(é™æ€ç½‘ç«™æ‰˜ç®¡)çš„å‘½ä»¤ï¼›
- æ§åˆ¶å°åŒ…å«äº†æ›´å¤šé…ç½®ä¿¡æ¯ã€èµ„æºä¿¡æ¯ï¼Œä¸€èˆ¬å±äºä½é¢‘æ“ä½œï¼›æ›´å¤šçš„æ˜¯æ“ä½œå±‚é¢ï¼›
- æ— è®ºæ˜¯æ§åˆ¶å°ï¼Œè¿˜æ˜¯ CLI , ç¬¬ä¸€ä»¶æ˜¯ç™»å½•ï¼Œå¦åˆ™æ— æ³•ç®¡ç†è‡ªå·±çš„èµ„æºï¼Œè¿™ä¸ªå¾ˆå¥½ç†è§£çš„ã€‚      


## éƒ¨ç½²é™æ€ç½‘ç«™      
åœ¨ [ç¬¬ 08 ç¯‡ï¼šé™æ€ç½‘ç«™éƒ¨ç½²æ€ä¹ˆç©](./08.md) ä¸­æåˆ°å¯ä»¥é€šè¿‡æ§åˆ¶å°éƒ¨ç½²é™æ€æ–‡ä»¶ã€‚å…¶å®ï¼ŒCLI ä¹Ÿæ”¯æŒéƒ¨ç½²å‘½ä»¤ã€‚ä¸¾ä¸ªä¾‹å­ğŸŒ°ï¼ŒVuepress ç”Ÿæˆ dist çš„ç›®å½•ä¸‹é¢çš„æ–‡ä»¶éƒ½å¯ä»¥éƒ¨ç½²åˆ°é™æ€ç½‘ç«™æ‰˜ç®¡ä¸Šé¢ã€‚æˆ‘ä»¬å¯ä»¥åœ¨ Vuepress é¡¹ç›®çš„ package.json ä¸­åŠ ä¸€ä¸ªå‘½ä»¤ï¼š      

```json
{
  "scripts": {
    "dev": "vuepress dev docs",
    "build": "vuepress build docs",
    "deploy": "tcb hosting:deploy docs/.vuepress/dist/ -e ä½ çš„ç¯å¢ƒ ID"
  },
  "dependencies": {
    "vuepress": "*"
  }
}
```      
é¦–å…ˆæ‰§è¡Œ login å‘½ä»¤ï¼Œè·å–é‰´æƒï¼Œè¿™æ ·æ‰èƒ½å¯¹ç¯å¢ƒå’Œèµ„æºè¿›è¡Œæ“ä½œï¼š     
```bash
tcb login    
```      
ç„¶åå¯ä»¥æ‰§è¡Œ     
```bash
tcb hosting:deploy docs/.vuepress/dist/ -e ä½ çš„ç¯å¢ƒ ID
```    
å¦‚æœæŒ‰ç…§ä¸Šé¢å¯¹ package.json è¿›è¡Œäº†é…ç½®ï¼Œä¹Ÿå¯ä»¥æ‰§è¡Œï¼š   
```bash
npm run deploy
```

ä¹‹åå°±å¯ä»¥çœ‹åˆ°æ•´ä¸ªä¸Šä¼ çš„è¿‡ç¨‹ä»¥åŠçŠ¶æ€ï¼Œæ¯”å¦‚å½“å‰ç«™ç‚¹çš„éƒ¨ç½²æ•ˆæœå¦‚ä¸‹ï¼š

```bash
LEEHUAWANG-MB0:vuepress wanglihua$ npm run deploy

> @ deploy /Users/wanglihua/code/cloud-developer/vuepress
> tcb hosting:deploy docs/.vuepress/dist/ -e ä½ çš„ç¯å¢ƒ ID

æ–‡ä»¶ä¼ è¾“ä¸­ [=========================================] 100% 0.0s
âœ” 
éƒ¨ç½²å®Œæˆ ğŸ‘‰ https://open-cloud-5d89b0-1300954686.tcloudbaseapp.com
âœ” æ–‡ä»¶å…±è®¡ 43 ä¸ª
âœ” æ–‡ä»¶ä¸Šä¼ æˆåŠŸ 43 ä¸ª
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ çŠ¶æ€  â”‚               æ–‡ä»¶               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ”   â”‚             404.html             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ”   â”‚            index.html            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ”   â”‚          posts/01.html           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ”   â”‚          posts/03.html           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ”   â”‚          posts/04.html           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ”   â”‚          posts/02.html           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ”   â”‚  assets/img/search.83621669.svg  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ”   â”‚ assets/css/0.styles.5eaf5755.css â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ”   â”‚     assets/js/10.97930671.js     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ”   â”‚     assets/js/12.ae757b08.js     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  âœ”   â”‚    assets/js/app.840f7c0a.js     â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
âœ– æ–‡ä»¶ä¸Šä¼ å¤±è´¥ 0 ä¸ª
```

è¿™é‡Œä½¿ç”¨åˆ°çš„å°±æ˜¯ `tcb hosting:deploy` å‘½ä»¤ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä½ çš„ç›®å½•åœ°å€ï¼Œ-e åé¢è·Ÿä¸Šä½ çš„ç¯å¢ƒ IDã€‚       
å½“ç„¶ä¸ä»…å¯ä»¥ç”¨äº Vuepressï¼Œå…¶å®ä»»ä½•éœ€è¦æ‰˜ç®¡çš„é¡µé¢æˆ–è€…å†…å®¹éƒ½å¯ä»¥é€šè¿‡ `tcb hosting:deploy` å‘½ä»¤è¿›è¡Œæ“ä½œã€‚          

`tcb hosting` å‘½ä»¤æ˜¯ä¸€ä¸ªé›†åˆï¼Œä¸æ­¢ä¸€ä¸ª deployï¼Œè¿˜æœ‰åˆ é™¤å’ŒæŸ¥çœ‹æ–‡ä»¶åˆ—è¡¨ç­‰å­å‘½ä»¤ï¼Œå…·ä½“è§ [CLI-é™æ€æ‰˜ç®¡](https://docs.cloudbase.net/cli/hosting.html#quan-liang-bu-shu)

## åˆ›å»ºå’Œéƒ¨ç½²äº‘å‡½æ•°      
ä¸€ä¸ªå‘½ä»¤æå®šæ•´ä¸ªé™æ€ç½‘ç«™çš„éƒ¨ç½²ï¼Œå½“ç„¶äº‘å‡½æ•°ä¹Ÿä¸åœ¨è¯ä¸‹ã€‚

**<span style="color:#1336EE;">ç¬¬ 0 æ­¥ï¼štcb login</span>**         
åŒæ ·æ˜¯ç™»å½•ï¼Œåªæœ‰ç™»å½•äº†æ‰èƒ½è·å–ç¯å¢ƒçš„æ“ä½œæƒé™ï¼Œè¿™ä¸ªé“ç†éƒ½æ‡‚çš„ã€‚    
```bash 
tcb login    
```
**<span style="color:#1336EE;">ç¬¬ 1 æ­¥ï¼štcb init</span>**    
é€‰æ‹©ç¯å¢ƒå’Œåˆå§‹åŒ–å‡½æ•°æ¨¡æ¿        
```bash
tcb init
```  
å¦‚ä¸‹å›¾ï¼ŒæŒ‰ä¸Šä¸‹é”®é€‰æ‹©ç¯å¢ƒï¼š     
![](https://6f70-open-cloud-5d89b0-1300954686.tcb.qcloud.la/serverless-reading/35.png)     

ç„¶åé€‰æ‹©è¯­è¨€å’Œæ¨¡æ¿ï¼Œè¿™é‡Œé€‰æ‹© Node.js å’Œäº‘å‡½æ•°çš„ç®€å•æ¨¡æ¿ï¼š     
![](https://6f70-open-cloud-5d89b0-1300954686.tcb.qcloud.la/serverless-reading/36.png)        

æ‰§è¡Œå®Œæˆçš„ç»“æœå¦‚ä¸‹ï¼š     
```bash
LEEHUAWANG-MB0:code wanglihua$ tcb init
âœ” é€‰æ‹©å…³è”ç¯å¢ƒ Â· serverless80 - [ä½ çš„ç¯å¢ƒ ID]
âœ” è¯·è¾“å…¥é¡¹ç›®åç§° Â· cloudbase-demo
âœ” é€‰æ‹©å¼€å‘è¯­è¨€ Â· Node
âœ” é€‰æ‹©äº‘å¼€å‘æ¨¡æ¿ Â· Hello World
âœ” å·²å­˜åœ¨åŒåæ–‡ä»¶å¤¹ï¼šcloudbase-demoï¼Œæ˜¯å¦è¦†ç›–ï¼Ÿ (y/N) Â· true
âœ” åˆ›å»ºé¡¹ç›® cloudbase-demo æˆåŠŸï¼

ğŸ‘‰ æ‰§è¡Œå‘½ä»¤ cd cloudbase-demo è¿›å…¥é¡¹ç›®æ–‡ä»¶å¤¹ï¼
ğŸ‘‰ æ‰§è¡Œå‘½ä»¤ cloudbase functions:deploy app éƒ¨ç½²äº‘å‡½æ•°
```      

åˆ›å»ºçš„é¡¹ç›®ç›®å½•å¦‚ä¸‹å›¾ï¼š    

![](https://6f70-open-cloud-5d89b0-1300954686.tcb.qcloud.la/serverless-reading/37.png)       

æ•´ä¸ªç›®å½•ä¸­æœ€æ ¸å¿ƒçš„æ–‡ä»¶æ˜¯ `cloudbaserc.js`ï¼Œè¯¥æ–‡ä»¶ä¸­æ˜¯æ•´ä¸ªé¡¹ç›®çš„é…ç½®ã€‚æ¯”å¦‚ï¼š       

- envId: é€šè¿‡ envId æŒ‡æ˜äº†æ˜¯å“ªä¸ªç¯å¢ƒï¼Œä¸€ä¸ªå¼€å‘è€…æœ‰å¤šä¸ªç¯å¢ƒï¼Œä»£ç è¦å‡†ç¡®ä¸Šä¼ åˆ°æŒ‡å®šç¯å¢ƒï¼›
- functionRoot: äº‘å‡½æ•°å­˜æ”¾çš„ç›®å½•ï¼Œè¿™æ ·å¯ä»¥ä¸€ä¸ªå‘½ä»¤éƒ¨ç½²æ‰€æœ‰çš„å‡½æ•°ï¼›
- functions: ä¸€ä¸ªå‡½æ•°çš„æ•°ç»„ï¼ŒæŒ‡æ˜æ¯ä¸ªå‡½æ•°çš„é…ç½®ï¼Œå› ä¸ºæ¯ä¸ªå‡½æ•°çš„é…ç½®å¯èƒ½ä¸ä¸€æ ·ï¼›è¯¥é…ç½®åœ¨ä¸Šä¼ æ—¶ä¼šè¦†ç›–æ§åˆ¶å°çš„å‡½æ•°è®¾ç½®ã€‚     

ä¾‹å¦‚åœ¨ functions ç›®å½•ä¸‹æœ‰ app ç›®å½•ï¼Œå³å‡½æ•°çš„åç§°ä¸º appï¼Œå…¶é…ç½®ä¿¡æ¯ä¸ºï¼š   
- è¶…æ—¶æ—¶é—´ 5 ç§’ï¼Œæœ€é•¿å¯ä»¥è®¾ç½® 60 ç§’ï¼›
- åœ¨ Node.js v10.15 ç¯å¢ƒä¸­æ‰§è¡Œè¯¥å‡½æ•°ï¼›
- å†…å­˜å ç”¨ 128 MBï¼Œç›®å‰æœ€å°å ç”¨å†…å­˜ä¸º 128 MBï¼›    

**<span style="color:#1336EE;">ç¬¬ 2 æ­¥ï¼štcb functions:deploy</span>**     
æˆ‘ä»¬æŒ‰ç…§åˆšæ‰åˆ›å»ºé¡¹ç›®å®Œæˆçš„å‘½ä»¤è¡Œæç¤ºè¿›è¡Œæ‰§è¡Œï¼š   
```bash
cd cloudbase-demo
tcb functions:deploy app
```     
å‘½ä»¤è¡Œæ‰§è¡Œç»“æœå¦‚ä¸‹ï¼Œå¹¶ä¸”å¯ä»¥æ ¹æ®æç¤ºæŸ¥çœ‹å‡½æ•°åˆ—è¡¨æˆ–è€…åˆ›å»º HTTP è§¦å‘ï¼š     

![](https://6f70-open-cloud-5d89b0-1300954686.tcb.qcloud.la/serverless-reading/38.png)     

**<span style="color:#1336EE;">ç¬¬ 3 æ­¥ï¼štcb functions:list</span>**     
æŸ¥çœ‹å‡½æ•°æ˜¯å¦éƒ¨ç½²å®ŒæˆåŠå…¶çŠ¶æ€ï¼Œå¦‚ä¸‹å›¾ï¼š     
![](https://6f70-open-cloud-5d89b0-1300954686.tcb.qcloud.la/serverless-reading/39.png)        

æ›´å¤šå¯å‚è§ [CLI-äº‘å‡½æ•°å‘½ä»¤](https://docs.cloudbase.net/cli/functions/deploy.html#fu-gai-tong-ming-han-shu)ã€‚        


## é™„å½•          
- [CLI-ç¯å¢ƒæ“ä½œå‘½ä»¤](https://docs.cloudbase.net/cli/envs/basement.html)ï¼›  
- [CLI-äº‘å­˜å‚¨å‘½ä»¤](https://docs.cloudbase.net/cli/storage.html)ï¼›  
- [CLI-äº‘æ¥å…¥å‘½ä»¤/HTTP è§¦å‘](https://docs.cloudbase.net/cli/http-service.html)ï¼›  